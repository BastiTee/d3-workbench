var d3wb=function(){"use strict";var t={};t.symbol={mean:"Ø",median:"x̃",sum:"Σ"};t.config=function(){var e={width:h("Width"),height:h("Height"),margin:{top:0,right:0,bottom:0,left:0},parentDivId:null,svgId:null,debug:!1,bgColor:t.color.background,datasrc:void 0};return e.attr=function(t,r){if(void 0!==t&&void 0!==r){if(t=String(t).trim(),"string"==typeof r&&(r=String(r).trim()),t.match(/^margin\..+$/))return this[(e=t.split("."))[0]][e[1]]=+r,this;if("margin"==t&&String(r).match(/^[0-9]+[ ]+[0-9]+[ ]+[0-9]+[ ]+[0-9]+$/)){var e=r.split(/[ ]+/);return this.margin={top:+e[0],right:+e[1],bottom:+e[2],left:+e[3]},this}return this[t]=r,this}},e.data=function(t){return arguments.length?(this.datasrc=t,this):this.datasrc},e.toCanvas=function(){return r(this)},e};var r=function(t){if(e(t),o(t.parentDivId)||t.parentDivId.startsWith("#")||(t.parentDivId="#"+t.parentDivId),o(t.svgId)||t.svgId.startsWith("#")||(t.svgId="#"+t.svgId),d(t),t.innerWidth=t.width-t.margin.left-t.margin.right,t.innerHeight=t.height-t.margin.top-t.margin.bottom,o(t.svgId)||null==d3.select(t.svgId).node())r=d3.select("svg");else var r=d3.select(t.svgId);r.attr("width",t.width).attr("height",t.height),r.append("rect").attr("width",t.width).attr("height",t.height).attr("fill",t.bgColor),d3.select("#standalone-body").style("background-color",t.bgColor),n(r,t),a(r,t);var i=r.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")");return i.svg=r,i.width=t.innerWidth,i.wid=t.innerWidth,i.w=t.innerWidth,i.height=t.innerHeight,i.hei=t.innerHeight,i.h=t.innerHeight,i.margin=t.margin,i.mar=t.margin,i.m=t.margin,i.data=t.data(),i.d=t.data(),i.div=t.parentDivId?t.parentDivId:"#standalone-body",i.transformCircular=function(){this.attr("transform","translate("+(this.w/2+this.m.left)+","+(this.h/2+this.m.top)+")")},i},e=function(t){var r=document.getElementsByTagName("script");if(!o(r)&&0!=r.length){e=r[r.length-1].src.split("/");if(!(o(e)||e.length<2)){var e=e[e.length-2],n=r[r.length-1],a=n.getAttribute("embedded")||!1;if(t.debug&&(console.log("scri-path | "+e),console.log("embedded  | "+a)),a){t.svgId=n.getAttribute("svgid")||!1,t.parentDivId=n.getAttribute("divid")||!1;var d=n.getAttribute("datapath")||void 0;i(t,d),t.debug&&(console.log("svg-id    | "+t.svgId),console.log("parent-id | "+t.parentDivId),console.log("data-path | "+d),console.log("res-path  | "+t.datasrc))}}}},i=function(t,r){if(void 0!==t.datasrc)if("string"==typeof t.datasrc||t.datasrc instanceof String)t.datasrc=r+"/"+t.datasrc;else for(var e=0;e<t.datasrc.length;e++)t.datasrc[e]=r+"/"+t.datasrc[e]},n=function(r,e){e.debug&&(r.append("rect").attr("width",e.width).attr("height",e.height).attr("fill",t.color.background.fade(20)),r.append("text").attr("x",e.width).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("fill",t.color.white).text(e.width+"x"+e.height),r.append("rect").attr("width",e.margin.left).attr("height",e.margin.top).attr("fill",t.color.background.fade(10)),r.append("text").attr("font-size","80%").attr("x",e.margin.left/2).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("fill",t.color.white).text(e.margin.left),r.append("text").attr("font-size","80%").attr("y",e.margin.top/2).attr("alignment-baseline","middle").attr("text-anchor","begin").attr("fill",t.color.white).text(e.margin.top),r.append("rect").attr("x",e.width-e.margin.right).attr("y",e.height-e.margin.bottom).attr("width",e.margin.right).attr("height",e.margin.bottom).attr("fill",t.color.background.fade(10)),r.append("text").attr("font-size","80%").attr("x",e.width-e.margin.right/2).attr("y",e.height).attr("alignment-baseline","baseline").attr("text-anchor","middle").attr("fill",t.color.white).text(e.margin.right),r.append("text").attr("font-size","80%").attr("x",e.width).attr("y",e.height-e.margin.bottom/2).attr("alignment-baseline","middle").attr("text-anchor","end").attr("fill",t.color.white).text(e.margin.bottom))},a=function(r,e){if(e.debug){var i=r.append("g");i.append("rect").attr("width",e.innerWidth).attr("height",e.innerHeight).attr("fill",t.color.white.fade(30)),i.append("text").attr("x",e.innerWidth).attr("alignment-baseline","hanging").attr("text-anchor","end").attr("fill",t.color.white).text(e.innerWidth+"x"+e.innerHeight),i.append("circle").attr("cx",e.innerWidth/2).attr("cy",e.innerHeight/2).attr("r",5).attr("fill",t.color.white),i.append("line").attr("x1",0).attr("x2",e.innerWidth/2).attr("y1",0).attr("y2",e.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),i.append("line").attr("x1",e.innerWidth).attr("x2",e.innerWidth/2).attr("y1",e.innerHeight).attr("y2",e.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),i.append("line").attr("x1",e.innerWidth).attr("x2",e.innerWidth/2).attr("y1",0).attr("y2",e.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),i.append("line").attr("x1",0).attr("x2",e.innerWidth/2).attr("y1",e.innerHeight).attr("y2",e.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),i.attr("transform","translate("+e.margin.left+","+e.margin.top+")")}},d=function(t){if(!o(t.parentDivId)&&null!=d3.select(t.parentDivId).node()){var r=d3.select(t.parentDivId).node().getBoundingClientRect(),e=r.width;e<1&&(e=t.width);t.width;var i=r.height;t.width=e,t.height=i}},o=function(t){return void 0===t||null===t||""===t},h=function(t){return Math.max(document.documentElement["client"+t],document.body["scroll"+t],document.documentElement["scroll"+t],document.body["offset"+t],document.documentElement["offset"+t])};return t}();
