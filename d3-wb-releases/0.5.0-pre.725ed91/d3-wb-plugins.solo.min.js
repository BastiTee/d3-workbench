function wbButton(){"use strict";function t(t){t.each(function(t,x){var w=d3.select(this),b=(e=w.append("g").attr("class","wb-button")).append("rect"),m=e.append("text");m.attr("pointer-events","none").attr("text-anchor","left").attr("alignment-baseline","hanging").style("user-select","none").style("cursor","pointer").style("font-size",s).style("fill",f).attr("transform","translate("+a+","+a+")"),(y=function(){c=n(l),m.text(Array(c).join("X"));var t=m.node().getBBox();b.attr("x",t.x).attr("y",t.y).attr("width",t.width+2*a).attr("height",t.height+2*a).attr("ry",5).attr("rx",5).style("cursor","pointer").style("fill",d).style("fill-opacity",p).on("click",function(){g=!1,i()}).on("mouseover",function(t,e){g=!1,d3.select(this).transition().duration(250).style("fill",h).attr("stroke",f).attr("stroke-width",1)}).on("mouseout",function(t,e){d3.select(this).transition().duration(250).style("fill",d).attr("stroke-width",0)});var s=b.node().getBBox();e.attr("transform","translate("+r+","+(o-s.y)+")"),u=(u+1)%l.length,m.text(l[u]),t=m.node().getBBox();var y=s.width-t.width;b.attr("transform","translate("+(-y/2+a)+",0)"),e.attr("transform","translate("+(r+y/2)+","+o+")")})(),setInterval(function(){g&&b.transition().duration(500).style("fill",h).attr("stroke",f).attr("stroke-width",1).transition().duration(500).style("fill",d).attr("stroke-width",0)},5e3)})}var e,n=function(t){return d3.max(t,function(t){return t.length})},r=0,o=0,a=3,i=function(){y(),console.log("d3wb: button clicked")},l=["Button State","Another State"],u=-1,c=n(l),s="80%",f="white",d="red",h="orange",g=!0,p=.8,y=function(){};return t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(o=e,t):o},t.labels=function(e){return arguments.length?(l=e,t):l},t.callback=function(e){return arguments.length?(i=function(){y(),e()},t):i},t.fontSize=function(e){return arguments.length?(s=e,t):s},t.color=function(e){return arguments.length?(f=e,t):f},t.fillHighlight=function(e){return arguments.length?(h=e,t):h},t.fill=function(e){return arguments.length?(d=e,t):d},t.opacity=function(e){return arguments.length?(p=e,t):p},t.pulse=function(e){return arguments.length?(g=e,t):g},t}function wbCooltip(){"use strict";function t(t){t.each(function(t,u){var c,s,f,d=d3.select(this),h=this.ownerSVGElement,g=h.getBBox(),p=!1;d.on("mouseover",function(t){if(!p){p=!0,c=d3.select(h).append("g").style("pointer-events","none"),s=c.append("rect"),f=c.append("text");var u=(""+l(t)).split("\n");for(var d in u)f.append("tspan").style("text-anchor","middle").style("alignment-baseline","hanging").style("fill",r).attr("x",0).attr("dy",function(){return 0==d?0:a}).text(u[d]);var g=f.node().getBBox();s.attr("rx",i).attr("ry",i).attr("width",g.width+2*n).attr("height",g.height+2*n).attr("x",-g.width/2-n).attr("y",-n).attr("opacity",e).style("fill",o)}}),d.on("mouseout",function(){p&&(p=!1,c.remove())}),d.on("mousemove",function(){var t=d3.mouse(h),e=s.node().getBBox(),r=t[0],o=t[1]-e.height;r=(r=r-e.width/2<0?e.width/2:r)+e.width/2>g.width?g.width-e.width/2:r,o=(o=o-n<0?n:o)+e.height-n>g.height?g.height-e.height+n:o,c.attr("transform","translate("+r+","+o+")")})})}var e=.8,n=5,r="white",o="black",a=20,i=5,l=function(){return(new Date).toDateString()+"\n"+String(Math.floor(9e8*Math.random()))};return t.opacity=function(n){return arguments.length?(e=n,t):e},t.padding=function(e){return arguments.length?(n=e,t):n},t.color=function(e){return arguments.length?(r=e,t):r},t.fill=function(e){return arguments.length?(o=e,t):o},t.lineHeight=function(e){return arguments.length?(a=e,t):a},t.roundCorners=function(e){return arguments.length?(i=e,t):i},t.selector=function(e){return arguments.length?(l=e,t):l},t}function wbTextbox(){function t(t){t.each(function(){var t=d3.select(this);d3.select("body").on("keydown",F).on("keypress",k).on("click",function(){b&&(e.attr("stroke",g),e.attr("fill",s),b=!1)});var h=t.append("g").attr("transform","translate("+a+","+i+")");e=h.append("rect").attr("width",l).attr("height",u).attr("rx",5).style("fill",s).style("stroke-width","1px").style("stroke",g).style("opacity",1),n=h.append("text").text(o).style("font-size",c).style("alignment-baseline","hanging").style("fill",d),r=h.append("text").style("alignment-baseline","hanging").style("font-size",c).style("fill",d).text("|").attr("opacity",0),h.append("rect").attr("width",l).attr("height",u).style("opacity",0).on("click",function(){b=!0,e.style("stroke",p),e.style("fill",f),r.attr("opacity",1),d3.event.stopPropagation()}),B()})}var e,n,r,o="Search...",a=10,i=10,l=120,u=40,c="80%",s="red",f="orange",d="white",h="white",g="darkred",p="darkorange",y=!0,x=!0,w=function(t){console.log("textbox-callback '"+t+"'")},b=!1,m=function(t){},v=function(t){void 0!==t?(x&&(t=t.toLowerCase()),""!==t?w(t):y&&w(t)):w(t)},B=function(){textB=n.node().getBoundingClientRect(),curB=r.node().getBoundingClientRect(),n.attr("x",.5*(l-textB.width)),n.attr("y",.5*(u-textB.height)),r.attr("x",l/2+textB.width/2),textB.height>0?r.attr("y",.5*(u-textB.height)):r.attr("y",.5*(u-curB.height))},F=function(){if(b){var t=d3.event.keyCode;m();var o=n.text(),a=[8,13,27];t<27&&!a.includes(t)||(8==t&&(d3.event.preventDefault(),o=o.substring(0,o.length-1),n.text(o),B(),v(o)),13==t&&v(o),27==t&&(e.style("stroke",g),e.style("fill",s),r.attr("opacity",0),b=!1,v(void 0)))}},k=function(){var t=d3.event.keyCode;if(m(),!(t<=27)){var e=n.text();e+=String.fromCharCode(t),n.text(e),B(),v(e)}};return t.callback=function(e){return arguments.length?(w=e,t):w},t.text=function(e){return arguments.length?(o=e,t):o},t.fill=function(e){return arguments.length?(s=e,t):s},t.fillSelected=function(e){return arguments.length?(f=e,t):f},t.stroke=function(e){return arguments.length?(g=e,t):g},t.strokeSelected=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(d=e,t):d},t.colorSelected=function(e){return arguments.length?(h=e,t):h},t.text=function(e){return arguments.length?(o=e,t):o},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(u=e,t):u},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(i=e,t):i},t.returnEmpty=function(e){return arguments.length?(y=e,t):y},t.returnLowercase=function(e){return arguments.length?(x=e,t):x},t}!function(){"use strict";var t=function(t,e){d3wb.util.injectCSS(`\n        .`+e+` line{\n          stroke: `+t+`;\n        }\n        .`+e+` path{\n          stroke: `+t+`;\n        }\n        .`+e+` text{\n          fill: `+t+`;\n        }  \n        `)},e=function(e){function n(n){n.each(function(n,l){t(r,"wb-axis-x");var u=d3.select(this).append("g").attr("transform","translate(0,"+a+")").attr("class","wb-axis wb-axis-x").call(o(e));90==i&&u.selectAll("text").attr("y",-2).attr("x",-9).attr("dy",".35em").style("text-anchor","end").attr("transform","rotate(-90)")})}var r="red",o=d3.axisTop,a=0,i=void 0;return n.type=function(t){return arguments.length?(o=t,n):o},n.y=function(t){return arguments.length?(a=t,n):a},n.color=function(t){return arguments.length?(r=t,n):r},n.rotation=function(t){return arguments.length?(i=t,n):i},n.scale=function(t){return arguments.length?(e=t,n):e},n.fontSize=function(t){return d3wb.util.injectCSS(`\n                .wb-axis-x text {\n                  font-size: `+t+`;\n              }`),n},n},n=function(e){function n(n){n.each(function(n,i){t(r,"wb-axis-y"),d3.select(this).append("g").attr("class","wb-axis wb-axis-y").attr("transform","translate("+a+",0)").call(o(e))})}var r="red",o=d3.axisLeft,a=0;return n.type=function(t){return arguments.length?(o=t,n):o},n.x=function(t){return arguments.length?(a=t,n):a},n.color=function(t){return arguments.length?(r=t,n):r},n.scale=function(t){return arguments.length?(e=t,n):e},n.fontSize=function(t){return d3wb.util.injectCSS(`\n                .wb-axis-y text {\n                  font-size: `+t+`;\n              }`),n},n};d3wb.add={xAxis:e,xAxisBottom:function(t){return e(t).type(d3.axisBottom)},xAxisLabel:function(t){function e(e){e.each(function(e,a){var i=d3.select(this.ownerSVGElement),l=i.node().getBBox();i.append("text").attr("transform",function(){var t="translate("+l.width/2+",";return t+="top"==o?r:l.height-r,t+=")"}).style("text-anchor","middle").style("fill",n).attr("alignment-baseline",function(){return"top"==o?"hanging":"auto"}).text(t)})}var n="red",r=15,o="top";return e.color=function(t){return arguments.length?(n=t,e):n},e.orientation=function(t){return arguments.length?(o=t,e):o},e},yAxis:n,yAxisRight:function(t){return n(t).type(d3.axisRight)},yAxisLabel:function(t){function e(e){e.each(function(e,a){var i=d3.select(this.ownerSVGElement),l=i.node().getBBox();i.append("text").attr("transform",function(){var t="translate(";return t+="left"==o?r:l.width-r,t+=","+l.height/2+") rotate(",t+="left"==o?"-90":"90",t+=")"}).style("text-anchor","middle").attr("alignment-baseline","hanging").style("fill",n).text(t)})}var n="red",r=5,o="left";return e.color=function(t){return arguments.length?(n=t,e):n},e.orientation=function(t){return arguments.length?(o=t,e):o},e},title:function(t){function e(e){e.each(function(e,a){var i=d3.select(this.ownerSVGElement),l=i.node().getBBox();i.append("text").attr("class","wb-title").attr("x",l.width/2).attr("y",5).attr("text-anchor","middle").attr("alignment-baseline","hanging").style("fill",n).style("font-size",r),(o=function(){i.selectAll(".wb-title").text(t)})()})}var n="red",r="140%",o=function(){};return e.color=function(t){return arguments.length?(n=t,e):n},e.fontSize=function(t){return arguments.length?(r=t,e):r},e.text=function(n){return arguments.length?(t=n,e):t},e.update=function(){o()},e},infoBox:function(t){function e(e){e.each(function(e,c){var s=d3.select(this.ownerSVGElement),f=s.node().getBBox(),d=s.append("g"),h=d.append("rect"),g=d.append("text"),p=t.split("\n");for(var c in p)g.append("tspan").style("text-anchor","end").style("alignment-baseline","hanging").style("font-size",o).style("fill",n).attr("x",0).attr("dy",function(){return 0==c?0:u}).text(p[c]);var y=g.node().getBBox();h.attr("rx","5").attr("ry","5").attr("width",y.width+2*a).attr("height",y.height+2*a).attr("x",y.x-a).attr("y",y.y-a).style("fill",r).style("opacity",l);var x=f.width-i-a,w=a+i;d.attr("transform","translate("+x+","+w+")")})}var n="white",r="red",o="80%",a=10,i=10,l=.8,u=15,c="topright";return e.color=function(t){return arguments.length?(n=t,e):n},e.fill=function(t){return arguments.length?(r=t,e):r},e.orientation=function(t){return arguments.length?(c=t,e):c},e},shadow:function(){var t=3,e=2,n=1,r=.4,o=d3wb.util.guid();return function(a){a.each(function(){var a=d3.select(this),i=d3.select(this.ownerSVGElement).append("defs").append("filter").attr("id",o);i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",t).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("dx",e).attr("dy",n).attr("result","offsetBlur"),i.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",r);var l=i.append("feMerge");l.append("feMergeNode").attr('in", "offsetBlur'),l.append("feMergeNode").attr("in","SourceGraphic"),a.style("filter","url(#"+o+")")})}},legend:function(){function t(t){t.each(function(){var t=d3.select(this);t.append("g").attr("class","legend").attr("transform","translate("+o+","+a+")");var i=d3.scaleOrdinal().domain(r.map(function(t){return t})).range(r.map(function(t,e){return n[e]})),l=d3.legendColor().shape("path",d3.symbol().type(d3.symbolCircle).size(100)()).scale(i);t.select(".legend").call(l).style("fill",e).style("font-size","90%")})}var e="white",n=["red","green","blue"],r=["Item 1","Item 2","Item 3"],o=0,a=0;return t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.text=function(e){return arguments.length?(r=e,t):r},t.colors=function(e){return arguments.length?(n=e,t):n},t.color=function(n){return arguments.length?(e=n,t):e},t}}}(),function(){"use strict";var t={dark:{background:"#1D1F21",black:"#282A2E",blue:"#5F819D",cyan:"#5E8D87",foreground:"#C5C8C6",green:"#8C9440",magenta:"#85678F",red:"#A54242",white:"#707880",yellow:"#DE935F"},gotham:{background:"#0A0F14",black:"#0A0F14",blue:"#195465",cyan:"#33859D",foreground:"#98D1CE",green:"#26A98B",magenta:"#4E5165",red:"#C33027",white:"#98D1CE",yellow:"#EDB54B"},light:{background:"#FFFFFF",black:"#000000",blue:"#87AFDF",cyan:"#AFDFDF",foreground:"#1A1D1D",green:"#AFD787",magenta:"#DFAFDF",red:"#D78787",white:"#FFFFFF",yellow:"#FFFFAF"},monokai:{background:"#272822",black:"#272822",blue:"#66D9EF",cyan:"#A1EFE4",foreground:"#F8F8F2",green:"#A6E22E",magenta:"#AE81FF",red:"#F92672",white:"#F8F8F2",yellow:"#F4BF75"},ocean:{background:"#2B303B",black:"#2B303B",blue:"#8FA1B3",cyan:"#96B5B4",foreground:"#C0C5CE",green:"#A3BE8C",magenta:"#B48EAD",red:"#BF616A",white:"#C0C5CE",yellow:"#EBCB8B"},sweetlove:{background:"#1F1F1F",black:"#4A3637",blue:"#535C5C",cyan:"#6D715E",foreground:"#C0B18B",green:"#7B8748",magenta:"#775759",red:"#D17B49",white:"#C0B18B",yellow:"#AF865A"},tomorrowlight:{background:"#FFFFFF",black:"#1D1F21",blue:"#81A2BE",cyan:"#8ABEB7",foreground:"#373B41",green:"#B5BD68",magenta:"#B294BB",red:"#CC6666",white:"#C5C8C6",yellow:"#F0C674"},yousay:{background:"#F5E7DE",black:"#666661",blue:"#4C7399",cyan:"#D97742",foreground:"#34302D",green:"#4C3226",magenta:"#BF9986",red:"#992E2E",white:"#34302D",yellow:"#A67C53"}},e=function(t,e){return t.name=e,t.fade=function(e){return u(t.name,100)[e]},t},n=function(t){var n=t;return"string"!=typeof t||t.startsWith("rgb")||(t=d3.rgb(d3wb.color[t]),t=e(t,n)),t},r=function(t){for(var e=[],n=0;n<t.length;n++)t[n].startsWith("#")?e.push(""+d3.rgb(t[n])):e.push(""+d3wb.color(t[n]));return e},o=function(){for(var t=["blue","red","green","magenta","foreground"],e=[],n=0;n<t.length;n++){var r=d3wb.color.lohiScaleArray(t[n],5,[.6,.6]);e=e.concat(r)}return e},a=function(){for(var t=["blue","cyan","green","magenta","red","yellow","foreground"],e=[],r=0;r<t.length;r++)e.push(n(t[r]));return e},i=function(t,e,n){if(n=n||[0,1],e<=2)return[t(0),t(1)];var r=(n[1]-n[0])/e,o=n[0]+r,a=[];a.push(t(n[0]));do{a.push(t(o)),o+=r}while(o<n[1]-r-1e-4);return a.push(t(n[1])),a},l=function(t,e,r,o){t=n(t),e=n(e);var a=d3.interpolateRgb(t,e);return i(a,r,o)},u=function(t,e,n){n=n||[.4,.7];var r=e%2==0,o=r?e/2:(e+1)/2,a=l("black",t,r?o+1:o,[n[0],1]),i=l(t,"white",o,[0,n[1]]);return a.concat(i.slice(1))},c=function(){return d3.scaleOrdinal(d3wb.color.category())},s=function(){for(var t=[],e=2;e<25;e+=5)t.push(d3wb.color.category()[e]);return d3.scaleOrdinal(t)},f=function(t,e){return e=e||[d3wb.color.white,d3wb.color.black],d3.scaleLinear().domain(t).interpolate(d3.interpolate).range(e)},d=function(t,e){return d3.scaleQuantile().domain(t).range(e)};d3wb.theme=function(n){if(!arguments.length){var i=Object.keys(d3wb.color),h=[];for(var g in i)"function"!=typeof d3wb.color[i[g]]&&h.push(d3wb.color[i[g]].name);return h}var p=t[n],y={lohiScaleArray:u,array:r,gradientArray:l,category:o,categoryMain:a,quantile:d,linearGradient:f,ordinal:c,smallOrdinal:s};for(var x in p)y[x]=d3.rgb(p[x]),y[x]=e(y[x],x);d3wb.color=y},d3wb.theme("light")}(),function(){"use strict";var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};d3wb.util={setLocale:function(t){if("de"!=t)throw"Unsupported locale.";d3.timeFormat=d3.timeFormatLocale({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}).format},changeCSVSeparator:function(t){d3.csv=function(e,n){d3.request(e).mimeType("text/csv").response(function(e){return d3.dsvFormat(t).parse(e.responseText)}).get(n)}},smoothData:function(t,e,n,r){var o=[],a=[];t.forEach(function(e,i){var l=i+1;if(o.push(e[n]),l%r==0||l==t.length){var u=d3.median(o);a.push(u),o=[]}});var i=[],l=0,u=0;for(var c in a){a[c];for(var s=(l+=r)>t.length?t.length%r:r,f=0==c?t[0][n]:a[c-1],d=a[c],h=d3.interpolate(f,d),g=1/s,p=0,y=0;y<s;y++){p+=g;var x={};x[e]=t[u][e],x[n]=h(p),i.push(x),u+=1}}return i},countCsvColumn:function(t,e,n,r){n=void 0===n||n;var o=d3.nest().key(function(t){return t[e]}).entries(t);void 0!==r&&r.length>0&&(o=o.filter(function(t){return!r.includes(t.key)}));for(var a=[],i=0;i<o.length;i++){var l={label:o[i].key,count:+o[i].values.length};a.push(l)}var u=d3.sum(a,function(t){return+t.count});return a.forEach(function(t){t.percent=+t.count/u*100}),n&&a.sort(function(t,e){return e.percent-t.percent}),a},guid:function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},injectCSS:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("style");n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)},logSVGSize:function(t){var e=t.ownerSVGElement.getBBox();console.log(e.x+" x "+e.y+" | "+e.width+" x "+e.height)},jsonAttributeMapToCSV:function(t){var e=["key"];for(var n in t[Object.keys(t)[0]])e.push(n);var r=['"'+e.join('","')+'"'];for(var o in t){var a=[o];for(var i in e)if(0!=i){var l=e[i];a.push(t[o][l])}r.push('"'+a.join('","')+'"')}var u=r.join("\n");return d3.csvParse(u)}}}();
