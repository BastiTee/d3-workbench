function wbBarChart(){"use strict";function t(t){t.each(function(t,o){var c=d3.select(this);t.forEach(function(t){t[l]=+t[l]}),n=d3.scaleBand().rangeRound([0,r],.1).paddingInner(.1).domain(t.map(function(t){return t[i]})),e=d3.scaleLinear().range([a,0]).domain([0,d3.max(t,function(t){return t[l]})]),c.selectAll("rect").data(t).enter().append("rect").attr("class","rects").attr("x",function(t){return n(t[i])}).attr("width",n.bandwidth()).attr("y",function(t){return e(t[l])}).attr("height",function(t){return a-e(t[l])}).attr("fill",u)})}var n,e,r=500,a=500,i="x",l="y",u="blue";return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(n){return arguments.length?(a=n,t):a},t.xSelector=function(n){return arguments.length?(i=n,t):i},t.ySelector=function(n){return arguments.length?(l=n,t):l},t.scaleX=function(e){return arguments.length?(n=e,t):n},t.scaleY=function(n){return arguments.length?(e=n,t):e},t.fill=function(n){return arguments.length?(u=n,t):u},t}function wbChordDiagram(){"use strict";function t(t){t.each(function(){var t=d3.select(this),l=r/2-100,u=d3.chord().padAngle(.04).sortSubgroups(d3.descending).sortChords(d3.descending),o=d3.arc().innerRadius(l).outerRadius(l+20),c=d3.ribbon().radius(l),s=u(n);t.attr("class","chord-circle").datum(s),t.append("circle").attr("fill","none").attr("pointer-events","all").attr("r",l+20);var d=t.selectAll("group").data(function(t){return t.groups}).enter().append("g").style("fill-opacity",".8").on("mouseover",function(t,n){f.classed("fade",function(t){return t.source.index!=n&&t.target.index!=n})}).on("mousemove",function(){}).on("mouseout",function(){});d.append("path").style("stroke",a).style("fill",a).attr("d",o),d.append("text").each(function(t){t.angle=(t.startAngle+t.endAngle)/2}).attr("dy",".35em").style("font-size","90%").attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).attr("transform",function(t){return"rotate("+(180*t.angle/Math.PI-90)+")translate("+(l+26)+")"+(t.angle>Math.PI?"rotate(180)":"")}).style("fill",a).text(function(t){return e[t.index].key});var f=t.selectAll("chord").data(function(t){return t}).enter().append("path").attr("class","chordpaths").style("fill-opacity",".8").style("stroke-width","25px").style("fill",function(t,n){return i(n)}).attr("d",c.radius(l))})}var n,e,r=500,a="black",i=d3.scaleOrdinal(d3.schemeCategory20c);return t.radius=function(n){return arguments.length?(r=n,t):r},t.matrix=function(e){return arguments.length?(n=e,t):n},t.keys=function(n){return arguments.length?(e=n,t):e},t.colors=function(n){return arguments.length?(i=n,t):i},t.fill=function(n){return arguments.length?(a=n,t):a},t}function wbDonutChart(){"use strict";function t(t){t.each(function(t,a){var i=d3.select(this),l=d3.pie().value(function(t){return t.percent}).sort(null).padAngle(.03),u=n/2,o=n/8,c=d3.arc().outerRadius(u).innerRadius(o),s=(i.selectAll("path").data(l(t)).enter().append("path").attr("class","paths").attr("d",c).attr("fill",function(t,n){return r(n)}),d3.scaleOrdinal().domain(t.map(function(t){return t.label})).range(t.map(function(t,n){return r(n)})));i.append("g").attr("class","legend").attr("transform",function(t,n){return"translate("+(u+10)+","+(10-u)+")"});var d=d3.legendColor().shape("path",d3.symbol().type(d3.symbolCircle).size(100)()).scale(s);i.select(".legend").call(d).style("fill",e).style("font-size","90%")})}var n=500,e="black",r=d3.scaleOrdinal(d3.schemeCategory10);return t.radius=function(e){return arguments.length?(n=e,t):n},t.fillLegend=function(n){return arguments.length?(e=n,t):e},t.colors=function(n){return arguments.length?(r=n,t):r},t}function wbGeoMap(){"use strict";function t(t){var s,d;t.each(function(t,f){var h=d3.select(this),g=d3.geoBounds(n),p=g[0],x=g[1],y=-(x[0]+p[0])/2,m=[(x[0]+p[0])/2+y,(x[1]+p[1])/2],v=(e=d3.geoAlbers().parallels([p[1],x[1]]).translate([r/2,a/2]).rotate([y,0,0]).center(m))(p),k=e(x),w=1*Math.min(r/(k[0]-v[0]),a/(-k[1]+v[1]));e=d3.geoAlbers().parallels([p[1],x[1]]).rotate([y,0,0]).translate([r/2,a/2]).scale(.975*w*1e3).center(m),d=d3.geoPath().projection(e),h.selectAll("path.feature").data(n.features).enter().append("path").attr("d",d).style("fill",i).style("stroke",l).style("stroke-width",1).on("click",function(t){var n=r/2,e=a/2,i=1;if(null===s||s!==t){var l=d.centroid(t),n=+l[0],e=+l[1],i=2.5;s=t}else s=null;h.transition().duration(1e3).attr("transform","translate("+r/2+","+a/2+")scale("+i+")translate("+-n+","+-e+")").style("stroke-width",1.75/i+"px")}),h.selectAll("circle").data(t).enter().append("circle").attr("transform",function(t){return"translate("+e([t.lon,t.lat])+")"}).style("stroke",o).style("stroke-width","0.4").attr("opacity",.9).style("fill",u).transition().delay(500).duration(1e3).attr("r",c)})}var n,e,r=500,a=500,i="#666666",l="#555555",u="#5A6A8B",o="#4e5c79",c=2;return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(n){return arguments.length?(a=n,t):a},t.mapData=function(e){return arguments.length?(n=e,t):n},t.projection=function(n){return arguments.length?(e=n,t):e},t.mapFill=function(n){return arguments.length?(i=n,t):i},t.mapStroke=function(n){return arguments.length?(l=n,t):l},t.dotFill=function(n){return arguments.length?(u=n,t):u},t.dotStroke=function(n){return arguments.length?(o=n,t):o},t.radius=function(n){return arguments.length?(c=n,t):c},t}function wbHeatMap(){"use strict";function t(t){t.each(function(t,i){var l=d3.select(this);t.forEach(function(t){t.day=+t.day,t.hour=+t.hour,t.value=+t.value});for(var u=Array(24),i=0;i<u.length;i++)u[i]=i+"";var o=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=Math.floor(n/24),s=Math.floor(e/o.length),d=(l.selectAll(".dayLabel").data(o).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,n){return n*s}).style("text-anchor","end").style("fill",r).attr("alignment-baseline","middle").attr("transform","translate(-6,"+s/2+")"),l.selectAll(".timeLabel").data(u).enter().append("text").text(function(t){return t}).attr("x",function(t,n){return n*c}).attr("y",0).style("text-anchor","middle").style("fill",r).attr("transform","translate("+c/2+", -6)"),l.selectAll(".hour").data(t).enter().append("rect").attr("x",function(t){return t.hour*c}).attr("y",function(t){return(t.day-1)*s}).attr("class","hour bordered").attr("width",c).attr("height",s).attr("stroke",r).attr("stroke-width","1").style("fill",r)),f=d3.extent(t,function(t){return t.value}),h=d3.scaleQuantile().domain(f).range(a);d.style("fill",function(t){return h(t.value)});var g=l.selectAll(".legend").data([0].concat(h.quantiles()),function(t){return t}).enter().append("g");g.append("rect").attr("x",function(t,n){return 2*c*n}).attr("y",e+10).attr("width",2*c).attr("height",s/2).attr("stroke",r).attr("stroke-width","1").style("fill",function(t,n){return a[n]}),g.append("text").attr("alignment-baseline","hanging").text(function(t){return"≥ "+Math.round(t)}).attr("x",function(t,n){return 2*c*n}).attr("y",e+s).style("fill",r)})}var n=500,e=500,r="black",a=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"];return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.colors=function(n){return arguments.length?(a=n,t):a},t.fill=function(n){return arguments.length?(r=n,t):r},t}function wbLinePlot(){"use strict";function t(t){t.each(function(t,s){var h=d3.select(this);h.append("path").attr("class","line"),(f=function(t){d3.extent(t,function(t){return t[u]}),d3.extent(t,function(t){return t[o]});n=i.rangeRound([0,r]).domain(d3.extent(t,function(t){return t[u]})),e=l.rangeRound([a,0]).domain(d3.extent(t,function(t){return t[o]}));var s=d3.line().curve(d).x(function(t){return n(t[u])}).y(function(t){return e(t[o])});h.selectAll(".line").transition().duration(500).attr("d",s(t)).style("fill","none").style("stroke-linecap","round").style("stroke-linejoin","round").style("stroke-width","1").style("stroke",c)})(t)})}var n,e,r=500,a=500,i=d3.scaleLinear(),l=d3.scaleLinear(),u="x",o="y",c="red",s="white",d=d3.curveBasis,f=function(){};return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(n){return arguments.length?(a=n,t):a},t.xAxisScale=function(n){return arguments.length?(i=n,t):i},t.yAxisScale=function(n){return arguments.length?(l=n,t):l},t.xDataPoints=function(n){return arguments.length?(u=n,t):u},t.yDataPoints=function(n){return arguments.length?(o=n,t):o},t.axisColor=function(n){return arguments.length?(s=n,t):s},t.stroke=function(n){return arguments.length?(c=n,t):c},t.curve=function(n){return arguments.length?(d=n,t):d},t.scaleX=function(){return n},t.scaleY=function(){return e},t.update=function(n){return f(n),t},t}function wbNetworkDiagram(){"use strict";function t(t){t.each(function(t,l){var u=d3.select(this);if(void 0===n){var o=[];t.nodes.forEach(function(t){o.push(t.group)});var c=Array.from(new Set(o.sort()));n=[];for(var l in c)n.push([c[l],i(c[l])])}var s=d3.scaleLinear().domain(d3.extent(t.nodes,function(t){return t.weight})).range([5,20]);t.nodes.forEach(function(t){t.r=s(t.weight)});var d=d3.extent(t.links,function(t){return t.value}),f=d3.scaleLinear().domain(d).range([1,20]),h=d3.forceSimulation().force("link",d3.forceLink().id(function(t){return t.id})).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(e/2,r/2)).force("x",d3.forceX(e).strength(.06)).force("y",d3.forceY(r).strength(.06)).force("collide",d3.forceCollide().radius(function(t){return t.r+.5}).iterations(4)),g=u.append("g").selectAll("line").data(t.links).enter().append("line").attr("stroke-width",function(t){return f(t.value)}).style("stroke",a).style("stroke-opacity","0.6"),p=u.append("g").selectAll("circle").data(t.nodes).enter().append("circle").attr("class","circles").attr("r",function(t){return t.r}).attr("fill",function(t){return i(t.group)}).style("stroke",a).style("stroke-width","1").call(d3.drag().on("start",function(t){d3.event.active||h.alphaTarget(.5).restart(),t.fx=t.x,t.fy=t.y}).on("drag",function(t){t.fx=d3.event.x,t.fy=d3.event.y}).on("end",function(t){d3.event.active||h.alphaTarget(0),t.fx=null,t.fy=null}));h.nodes(t.nodes).on("tick",function(){g.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),p.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y})}),h.force("link").links(t.links);var x=u.append("g").attr("font-size","75%").attr("text-anchor","end").selectAll("g").data(n).enter().append("g").attr("transform",function(t,n){return"translate(0,"+(20*n+10)+")"});x.append("rect").attr("x",e-19).attr("width",19).attr("height",19).attr("fill",function(t){return t[1]}),x.append("text").attr("x",e-24).attr("y",9.5).attr("dy","0.32em").attr("fill",a).text(function(t){return t[0]})})}var n,e=500,r=500,a="black",i=d3.scaleOrdinal(["red","green","blue"]);return t.width=function(n){return arguments.length?(e=n,t):e},t.height=function(n){return arguments.length?(r=n,t):r},t.fill=function(n){return arguments.length?(a=n,t):a},t.legend=function(e){return arguments.length?(n=e,t):n},t.colors=function(n){return arguments.length?(i=n,t):i},t}function wbNumericHistogram(){"use strict";function t(t){t.each(function(t,u){function o(u){g.domain(u);var o=d3.histogram().value(function(t){return t.value}).domain(g.domain()).thresholds(g.ticks(i))(t),c=d3.extent(o,function(t){return t.length});x.domain(c),b.selectAll(".bar").remove().exit().data(o).enter().append("rect").attr("class","bar").attr("fill",r).attr("width",function(t,e){var r=n/o.length;return r-=.1*r}).attr("height",function(t){return e-x(t.length)}).attr("y",function(t){return x(t.length)}).transition(p).attr("x",function(t){return g(t.x0)}),f.select(".axis-x").transition(p).call(y),f.select(".axis-y").transition(p).call(m),f.selectAll(".axis line").attr("stroke",a),f.selectAll(".axis path").attr("stroke",a),f.selectAll(".axis text").attr("fill",a),l()}function c(){k=null}function s(){o(d)}var d,f=d3.select(this),h=d3.extent(t,function(t){return t.value}),g=d3.scaleLinear().rangeRound([0,n]),p=f.transition().duration(750),x=d3.scaleLinear().rangeRound([e,0]),y=d3.axisBottom(g),m=d3.axisLeft(x),v=d3.brushX().extent([[0,0],[n,e]]).on("end",function(){var t=d3.event.selection;if(t)d=[g.invert(t[0])<h[0]?h[0]:g.invert(t[0]),g.invert(t[1])>h[1]?h[1]:g.invert(t[1])],f.select(".brush").call(v.move,null);else{if(!k)return k=setTimeout(c,w);d=h}s()}),k=null,w=350,b=(f.append("g").attr("class","brush").call(v),f.append("g"));f.append("g").attr("transform","translate(0,"+e+")").attr("class","axis axis-x"),f.append("g").attr("class","axis axis-y"),o(h)})}var n=500,e=500,r="red",a="white",i=50,l=function(){};return t.height=function(n){return arguments.length?(e=n,t):e},t.width=function(e){return arguments.length?(n=e,t):n},t.barColor=function(n){return arguments.length?(r=n,t):r},t.axisColor=function(n){return arguments.length?(a=n,t):a},t.numBins=function(n){return arguments.length?(i=n,t):i},t.updateCallback=function(n){return arguments.length?(l=n,t):l},t}function wbPackedBubbles(){"use strict";function t(t){t.each(function(t,l){var u=d3.select(this),o=d3.extent(t,function(t){return t.value}),c=d3.scaleLinear().domain(o).interpolate(d3.interpolate).range(a),s=d3.scaleLinear().domain(o).interpolate(d3.interpolate).range(i);if(n)var d=d3.scaleLog().domain(o).range(n);var f=d3.pack().size([e,r]).padding(.3),h=d3.hierarchy({children:t}).sum(function(t){return t.value}),g=u.selectAll("node").data(f(h).leaves()).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"});g.append("a").attr("xlink:href",function(t){return t.data.link}).append("circle").attr("class","circles").attr("id",function(t){return t.id}).transition().duration(500).attr("r",function(t){return t.r}).style("fill",function(t){return s(t.value)}).style("opacity",function(t){return n?d(t.value):"1.0"}),g.append("a").attr("xlink:href",function(t){return t.data.link}).append("text").attr("class","texts").style("font-size","10px").style("text-anchor","middle").style("alignment-baseline","middle").attr("x",0).attr("y",0).text(function(t){return t.data.id}).style("font-size",function(t){return(2*t.r-10)/this.getComputedTextLength()*10+"px"}).style("opacity",function(t){return n?d(t.value):"1.0"}).transition().duration(1e3).style("fill",function(t){return c(t.value)})})}var n,e=500,r=500,a=["green","white"],i=["green","red"];return t.width=function(n){return arguments.length?(e=n,t):e},t.height=function(n){return arguments.length?(r=n,t):r},t.colorRange=function(n){return arguments.length?(a=n,t):a},t.fillRange=function(n){return arguments.length?(i=n,t):i},t.fadeOpacity=function(e){return arguments.length?(n=e,t):n},t}function wbSankeyDiagram(){"use strict";function t(t){t.each(function(t,i){var l=d3.select(this),u=d3.format(",.0f"),o=function(t){return u(t)+" TWh"},c=d3.sankey().nodeWidth(15).nodePadding(10).size([n,e]),s=c.link();c.nodes(t.nodes).links(t.links).layout(32);var d=l.selectAll(".sankey-link").data(t.links).enter().append("path").attr("class","sankey-link").style("fill","none").style("stroke",r).style("stroke-opacity",.2).attr("d",s).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,n){return n.dy-t.dy});d.append("title").text(function(t){return t.source.name+" → "+t.target.name+"\n"+o(t.value)});var f=l.selectAll(".sankey-node").data(t.nodes).enter().append("g").attr("class","sankey-node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).call(d3.drag().subject(function(t){return t}).on("start",function(){this.parentNode.appendChild(this)}).on("drag",function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(e-t.dy,d3.event.y)))+")"),c.relayout(),d.attr("d",s)}));f.append("rect").style("cursor","move").style("shape-rendering","crispEdges").attr("height",function(t){return t.dy}).attr("width",c.nodeWidth()).style("fill",function(t){return t.color=a(t.name.replace(/ .*/,""))}).style("stroke",function(t){return r}).append("title").text(function(t){return t.name+"\n"+o(t.value)}),f.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("fill",r).attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<n/2}).attr("x",6+c.nodeWidth()).attr("text-anchor","start")})}var n=500,e=500,r="black",a=d3.scaleOrdinal(d3.schemeCategory20c);return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.fill=function(n){return arguments.length?(r=n,t):r},t.colors=function(n){return arguments.length?(a=n,t):a},t}function wbScatterPlot(){"use strict";function t(t){t.each(function(t,m){var v=d3.select(this),k=d3.extent(t,function(t){return t[o]}),w=d3.extent(t,function(t){return t[c]}),b=d3.extent(t,function(t){return t[s]});v.selectAll(".datapoint").data(t).enter().append("a").attr("xlink:href",f).append("rect").attr("class","datapoint").attr("width",8).attr("height",8).attr("rx",5),v.append("g").attr("class","axis axis-x").attr("transform","translate(0,"+e+")"),v.append("g").attr("class","axis axis-y");var A,L,z,B,C,D;(y=function(f){f=f||!1,void 0!==h&&(B=d3.scaleLog().domain(d3.extent(t,function(t){return t[h]})).range(g)),A=r.range([0,n]).domain(k),L=a.range([e,0]).domain(w),z=i.domain(b).interpolate(d3.interpolate).range([l,u]),D=d3.axisLeft(L),x(D),C=d3.axisBottom(A),p(C),v.select(".axis-x").transition().duration(500).call(C),v.select(".axis-y").transition().duration(500).call(D),v.selectAll(".axis line").attr("stroke",d),v.selectAll(".axis path").attr("stroke",d),v.selectAll(".axis text").attr("fill",d);(f?v.selectAll(".datapoint"):v.selectAll(".datapoint").transition().duration(500)).attr("opacity",function(t){return void 0!==h?B(t[h]):1}).attr("x",function(t){return A(t[o])-4}).attr("y",function(t){return L(t[c])-4}).style("fill",function(t){return z(t[s])})})(!0)})}var n=500,e=500,r=d3.scaleLinear(),a=d3.scaleLinear(),i=d3.scaleLinear(),l="green",u="red",o="x",c="y",s="x",d="white",f=function(){},h=void 0,g=[0,1],p=function(t){return t},x=function(t){return t},y=function(){};return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.xAxisScale=function(n){return arguments.length?(r=n,t):r},t.yAxisScale=function(n){return arguments.length?(a=n,t):a},t.zAxisScale=function(n){return arguments.length?(i=n,t):i},t.xDataPoints=function(n){return arguments.length?(o=n,t):o},t.yDataPoints=function(n){return arguments.length?(c=n,t):c},t.zDataPoints=function(n){return arguments.length?(s=n,t):s},t.opacityDataPoints=function(n){return arguments.length?(h=n,t):h},t.opacityRange=function(n){return arguments.length?(g=n,t):g},t.axisColor=function(n){return arguments.length?(d=n,t):d},t.colorLow=function(n){return arguments.length?(l=n,t):l},t.colorHigh=function(n){return arguments.length?(u=n,t):u},t.href=function(n){return arguments.length?(f=n,t):f},t.formatXAxis=function(n){return arguments.length?(p=n,t):p},t.formatYAxis=function(n){return arguments.length?(x=n,t):x},t.update=function(){return y(),t},t}function wbStackedBarChart(){"use strict";function t(t){t.each(function(t,i){var l=d3.select(this);t.forEach(function(t,n){var e=Object.keys(t);for(t.total=0,n=1;n<e.length;++n)t.total+=t[e[n]]=+t[e[n]]}),n=d3.scaleBand().rangeRound([0,r]).paddingInner(.05).align(.1),e=d3.scaleLinear().rangeRound([a,0]);var c=d3.scaleOrdinal().range(u),s=t.columns.slice(1);t.sort(function(t,n){return n.total-t.total}),n.domain(t.map(function(t){return t.id})),e.domain([0,d3.max(t,function(t){return t.total})]).nice(),c.domain(s),l.append("g").selectAll("g").data(d3.stack().keys(s)(t)).enter().append("g").attr("fill",function(t){return c(t.key)}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("class","rects").attr("x",function(t){return n(t.data.id)}).attr("y",function(t){return e(t[1])}).attr("height",function(t){return e(t[0])-e(t[1])}).attr("width",n.bandwidth());var d=l.append("g").attr("font-size","75%").attr("text-anchor","end").selectAll("g").data(s.slice()).enter().append("g").attr("transform",function(t,n){return"translate(0,"+20*n+")"});d.append("rect").attr("x",r-19).attr("width",19).attr("height",19).attr("fill",c),d.append("text").attr("x",r-24).attr("y",9.5).attr("dy","0.32em").text(function(t){return t}).attr("fill",o)})}var n,e,r=500,a=500,i="x",l="y",u=["red","green","blue"],o="black";return t.width=function(n){return arguments.length?(r=n,t):r},t.height=function(n){return arguments.length?(a=n,t):a},t.xSelector=function(n){return arguments.length?(i=n,t):i},t.ySelector=function(n){return arguments.length?(l=n,t):l},t.scaleX=function(e){return arguments.length?(n=e,t):n},t.scaleY=function(n){return arguments.length?(e=n,t):e},t.colors=function(n){return arguments.length?(u=n,t):u},t.legendFill=function(n){return arguments.length?(o=n,t):o},t}function wbStaticNumbers(){"use strict";function t(t){t.each(function(t,i){var l=d3.select(this),u=n/t.length,o=n/20;l.selectAll("number-value").data(t).enter().append("text").text(function(t){return t.name}).attr("x",function(t,n){return n*u+o/2}).attr("y",e).attr("text-anchor","left").attr("alignment-baseline","baseline").attr("fill",r).style("font-size","20").style("font-weight","bold").text(function(t){return t.value}).style("font-size",function(t){return(u-o)/this.getComputedTextLength()*20}).each(function(t){t.numberBox=this.getBBox()}),l.selectAll("number-label").data(t).enter().append("text").text(function(t){return t.name}).attr("x",function(t,n){return n*u+o/2}).attr("y",function(t){return e-t.numberBox.height+.2*t.numberBox.height}).attr("text-anchor","left").attr("fill",a).style("font-size","20").text(function(t){return t.label}).style("font-size",function(t){return(u-o)/this.getComputedTextLength()*20}).each(function(t){t.numberBox=this.getBBox()})})}var n=500,e=500,r="black",a="red";return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.fillNumber=function(n){return arguments.length?(r=n,t):r},t.fillLabel=function(n){return arguments.length?(a=n,t):a},t}function wbTimeseries(){"use strict";function t(t){t.each(function(t,d){var f=d3.select(this),h=d3.extent(t,function(t){return t.date});t.forEach(function(t){t.month=t.date.getMonth(),t.year=t.date.getFullYear(),t.weekday=t.date.getDay(),t.hour=t.date.getHours(),t.minute=t.date.getMinutes(),t.day=new Date(t.date).setHours(0,0,0,0),t["minute-of-day"]=new Date(t.date).setSeconds(0,0)});k=d3.extent(t,function(t){return t[l]});if("month"==l)var g=d3.timeMonths(new Date(2017,0,1),new Date(2017,11,31)),p=d3.timeFormat("%B");else if("year"==l){var p=function(t){return t},x=[];(g=d3.timeYears(new Date(k[0],0,1),new Date(k[1],12,1))).forEach(function(t){x.push(t.getFullYear())}),g=x}else if("weekday"==l)var g=[0,1,2,3,4,5,6],p=d3.timeFormat("%A");else if("day"==l)var g=d3.timeDays(h[0],h[1]),p=d3.timeFormat("%d.%m.%Y");else if("minute-of-day"==l)var g=d3.timeMinutes(h[0]-6e4,h[1]),p=d3.timeFormat("%H:%M");n=d3.scaleOrdinal().domain(g).range(d3.range(0,a,a/g.length));var y=a/g.length*.1,m=d3.histogram().value(function(t){return t[l]}).thresholds(g)(t),v=d3.max(m,function(t){return t.length});e=d3.scaleLinear().range([i,0]).domain([0,v+1]);var k=d3.extent(m,function(t){return t.length}),w=a/g.length-y;if(f.selectAll("rect").data(m).enter().append("rect").attr("class","rects").attr("x",0).attr("fill",function(t){return u}).attr("transform",function(t){return"translate("+n(t.x0)+","+e(t.length)+")"}).attr("width",function(t){return w}).attr("height",function(t){return i-e(t.length)}),s){m.forEach(function(t){var n=[];t.forEach(function(t){n=n.concat(t.value)}),t.mean=d3.mean(n)});var b=d3.scaleOrdinal().domain(g).range(d3.range(0,a,a/g.length)),A=a/g.length*.8,v=d3.max(m,function(t){return t.mean});r=d3.scaleLinear().range([i,0]).domain([0,v+1]),f.selectAll(".dim").data(m).enter().append("rect").attr("class","valuerects").attr("fill",function(t){return o}).attr("transform",function(t){var n=w/2-a/g.length*.1;return"translate("+(b(t.x0)+n)+","+r(t.mean)+")"}).attr("width",function(t){return a/g.length-A}).attr("height",function(t){return i-r(t.mean)})}var L=f.append("g").attr("transform","translate(0,"+i+")").selectAll("xaxis").data(m).enter();L.append("line").attr("x1",0).attr("x2",a).style("stroke",c),L.append("text").text(function(t,n){if("weekday"!=l)return p(g[n]);var e=d3.timeDays(new Date(2017,0,1),new Date(2017,0,8));return p(e[g[n]])}).style("text-anchor","middle").style("font-size","70%").style("fill",c).attr("x",function(t,n){return n*(a/g.length)+a/g.length/2-y/2}).attr("y",function(t){return this.getBBox().height+5}),L.append("line").attr("x1",function(t,n){return n*(a/g.length)+a/g.length/2-y/2}).attr("x2",function(t,n){return n*(a/g.length)+a/g.length/2-y/2}).attr("y1",0).attr("y2",5).style("stroke",c)})}var n,e,r,a=500,i=500,l="hour",u="red",o="orange",c="black",s=void 0;return t.width=function(n){return arguments.length?(a=n,t):a},t.height=function(n){return arguments.length?(i=n,t):i},t.target=function(n){return arguments.length?(l=n,t):l},t.fill=function(n){return arguments.length?(u=n,t):u},t.fillValues=function(n){return arguments.length?(o=n,t):o},t.fillAxis=function(n){return arguments.length?(c=n,t):c},t.scaleX=function(e){return arguments.length?(n=e,t):n},t.scaleY=function(n){return arguments.length?(e=n,t):e},t.scaleY2=function(n){return arguments.length?(r=n,t):r},t.valueColumn=function(n){return arguments.length?(s=n,t):s},t}function wbTreeMap(){"use strict";function t(t){t.each(function(t,i){var l=d3.select(this),u=(d3.format(",d"),d3.treemap().tile(d3.treemapResquarify).size([n,e]).round(!0).paddingInner(1.5)),o=d3.hierarchy(t).eachBefore(function(t){t.data.id=(t.parent?t.parent.data.id+".":"")+t.data.name}).sum(function(t){return t.size}).sort(function(t,n){return n.height-t.height||n.value-t.value});u(o);var c=l.selectAll("g").data(o.leaves()).enter().append("g").attr("class","cells").attr("transform",function(t){return"translate("+t.x0+","+t.y0+")"});c.append("rect").attr("id",function(t){return t.data.id}).attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return t.y1-t.y0}).attr("fill",function(t){return r(t.parent.data.id)}),c.append("clipPath").attr("id",function(t){return"clip-"+t.data.id}).append("use").attr("xlink:href",function(t){return"#"+t.data.id}),c.append("text").style("font-size","75%").attr("clip-path",function(t){return"url(#clip-"+t.data.id+")"}).selectAll("tspan").data(function(t){return t.data.name.split(/(?=[A-Z][^A-Z])/g)}).enter().append("tspan").attr("x",4).attr("y",function(t,n){return 13+10*n}).attr("fill",a).text(function(t){return t})})}var n=500,e=500,r=d3.scaleOrdinal(d3.schemeCategory20c),a="black";return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.colors=function(n){return arguments.length?(r=n,t):r},t.fill=function(n){return arguments.length?(a=n,t):a},t}function wbWordCloud(){"use strict";function t(t){t.each(function(t,a){var i=d3.select(this);t.forEach(function(t){t.fontsize=1e4*+t.textrank});var l=d3.extent(t,function(t){return t.textrank}),u=d3.scaleLinear().domain(l).interpolate(d3.interpolate).range(r);d3.layout.cloud().size([n,e]).words(t).padding(1).rotate(0).font("Abel").fontSize(function(t){return t.fontsize}).on("end",function(t){i.attr("transform","translate("+n/2+","+e/2+")");var r=i.selectAll("text").data(t,function(t){return t.text});r.enter().append("text").style("fill",function(t){return u(t.textrank)}).attr("text-anchor","middle").attr("font-size",function(t){return t.size+"px"}).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text}),r.exit().remove()}).start()})}var n=500,e=500,r=["green","green"];return t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(n){return arguments.length?(e=n,t):e},t.colorRange=function(n){return arguments.length?(r=n,t):r},t}
