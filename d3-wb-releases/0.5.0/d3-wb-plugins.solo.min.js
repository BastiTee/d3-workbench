function wbCooltip(){"use strict";function t(t){t.each(function(t,l){var c,d,s,f=d3.select(this),h=this.ownerSVGElement,g=h.getBBox(),p=!1;f.on("mouseover",function(t){if(!p){p=!0,c=d3.select(h).append("g").style("pointer-events","none"),d=c.append("rect"),s=c.append("text");var l=(""+u(t)).split("\n");for(var f in l)s.append("tspan").style("text-anchor","middle").style("dominant-baseline","hanging").style("fill",r).attr("x",0).attr("dy",function(){return 0==f?0:a}).text(l[f]);var g=s.node().getBBox();d.attr("rx",i).attr("ry",i).attr("width",g.width+2*e).attr("height",g.height+2*e).attr("x",-g.width/2-e).attr("y",-e).attr("opacity",n).style("fill",o)}}),f.on("mouseout",function(){p&&(p=!1,c.remove())}),f.on("mousemove",function(){var t=d3.mouse(h),n=d.node().getBBox(),r=t[0],o=t[1]-n.height;r=(r=r-n.width/2<0?n.width/2:r)+n.width/2>g.width?g.width-n.width/2:r,o=(o=o-e<0?e:o)+n.height-e>g.height?g.height-n.height+e:o,c.attr("transform","translate("+r+","+o+")")})})}var n=.8,e=5,r="white",o="black",a=20,i=5,u=function(){return(new Date).toDateString()+"\n"+String(Math.floor(9e8*Math.random()))};return t.opacity=function(e){return arguments.length?(n=e,t):n},t.padding=function(n){return arguments.length?(e=n,t):e},t.color=function(n){return arguments.length?(r=n,t):r},t.fill=function(n){return arguments.length?(o=n,t):o},t.lineHeight=function(n){return arguments.length?(a=n,t):a},t.roundCorners=function(n){return arguments.length?(i=n,t):i},t.selector=function(n){return arguments.length?(u=n,t):u},t}!function(){"use strict";var t=function(t,n){d3wb.util.injectCSS(`\n        .`+n+` line{\n          stroke: `+t+`;\n        }\n        .`+n+` path{\n          stroke: `+t+`;\n        }\n        .`+n+` text{\n          fill: `+t+`;\n        }  \n        `)},n=function(n){function e(e){e.each(function(e,u){t(r,"wb-axis-x");var l=d3.select(this).append("g").attr("transform","translate(0,"+a+")").attr("class","wb-axis wb-axis-x").call(o(n));90==i&&l.selectAll("text").attr("y",-2).attr("x",-9).attr("dy",".35em").style("text-anchor","end").attr("transform","rotate(-90)")})}var r="red",o=d3.axisTop,a=0,i=void 0;return e.type=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.color=function(t){return arguments.length?(r=t,e):r},e.rotation=function(t){return arguments.length?(i=t,e):i},e.scale=function(t){return arguments.length?(n=t,e):n},e.fontSize=function(t){return d3wb.util.injectCSS(`\n                .wb-axis-x text {\n                  font-size: `+t+`;\n              }`),e},e},e=function(n){function e(e){e.each(function(e,i){t(r,"wb-axis-y"),d3.select(this).append("g").attr("class","wb-axis wb-axis-y").attr("transform","translate("+a+",0)").call(o(n))})}var r="red",o=d3.axisLeft,a=0;return e.type=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(a=t,e):a},e.color=function(t){return arguments.length?(r=t,e):r},e.scale=function(t){return arguments.length?(n=t,e):n},e.fontSize=function(t){return d3wb.util.injectCSS(`\n                .wb-axis-y text {\n                  font-size: `+t+`;\n              }`),e},e};d3wb.add={xAxis:n,xAxisBottom:function(t){return n(t).type(d3.axisBottom)},xAxisLabel:function(t){function n(n){n.each(function(n,a){var i=d3.select(this.ownerSVGElement),u=i.node().getBBox();i.append("text").attr("transform",function(){var t="translate("+u.width/2+",";return t+="top"==o?r:u.height-r,t+=")"}).style("text-anchor","middle").style("fill",e).attr("dominant-baseline",function(){return"top"==o?"hanging":"auto"}).text(t)})}var e="red",r=15,o="top";return n.color=function(t){return arguments.length?(e=t,n):e},n.orientation=function(t){return arguments.length?(o=t,n):o},n},yAxis:e,yAxisRight:function(t){return e(t).type(d3.axisRight)},yAxisLabel:function(t){function n(n){n.each(function(n,a){var i=d3.select(this.ownerSVGElement),u=i.node().getBBox();i.append("text").attr("transform",function(){var t="translate(";return t+="left"==o?r:u.width-r,t+=","+u.height/2+") rotate(",t+="left"==o?"-90":"90",t+=")"}).style("text-anchor","middle").attr("dominant-baseline","hanging").style("fill",e).text(t)})}var e="red",r=5,o="left";return n.color=function(t){return arguments.length?(e=t,n):e},n.orientation=function(t){return arguments.length?(o=t,n):o},n},title:function(t){function n(n){n.each(function(n,a){var i=d3.select(this.ownerSVGElement),u=i.node().getBBox();i.append("text").attr("class","wb-title").attr("x",u.width/2).attr("y",5).attr("text-anchor","middle").attr("dominant-baseline","hanging").style("fill",e).style("font-size",r),(o=function(){i.selectAll(".wb-title").text(t)})()})}var e="red",r="140%",o=function(){};return n.color=function(t){return arguments.length?(e=t,n):e},n.fontSize=function(t){return arguments.length?(r=t,n):r},n.text=function(e){return arguments.length?(t=e,n):t},n.update=function(){o()},n},infoBox:function(t){function n(n){n.each(function(n,h){var g=d3.select(this.ownerSVGElement),p=g.node().getBBox(),b=g.append("g"),y=b.append("rect"),v=b.append("text"),m=t.split("\n");for(var h in m)v.append("tspan").style("text-anchor","end").style("dominant-baseline","hanging").style("font-size",i).style("fill",o).attr("x",0).attr("dy",function(){return 0==h?0:d}).text(m[h]);var w=v.node().getBBox();y.attr("rx",s).attr("ry",s).attr("width",w.width+2*u).attr("height",w.height+2*u).attr("x",w.x-u).attr("y",w.y-u).style("fill",a).style("opacity",c);var x=void 0!==e?e:p.width-l-u,F=void 0!==r?r:u+l;b.attr("transform","translate("+x+","+F+"),rotate("+f+")")})}var e,r,o="white",a="red",i="80%",u=10,l=10,c=.8,d=15,s=5,f=0;return n.opacity=function(t){return arguments.length?(c=t,n):c},n.color=function(t){return arguments.length?(o=t,n):o},n.fill=function(t){return arguments.length?(a=t,n):a},n.margin=function(t){return arguments.length?(l=t,n):l},n.roundCorners=function(t){return arguments.length?(s=t,n):s},n.rotate=function(t){return arguments.length?(f=t,n):f},n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},shadow:function(){var t=3,n=2,e=1,r=.4,o=d3wb.util.guid();return function(a){a.each(function(){var a=d3.select(this),i=d3.select(this.ownerSVGElement).append("defs").append("filter").attr("id",o);i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",t).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",e).attr("result","offsetBlur"),i.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",r);var u=i.append("feMerge");u.append("feMergeNode").attr('in", "offsetBlur'),u.append("feMergeNode").attr("in","SourceGraphic"),a.style("filter","url(#"+o+")")})}},legend:function(){function t(t){t.each(function(){var t=d3.select(this);t.append("g").attr("class","legend").attr("transform","translate("+a+","+i+")");var c=d3.scaleOrdinal().domain(o.map(function(t){return t})).range(o.map(function(t,n){return r[n]})),d=d3.legendColor().shape("path",d3.symbol().type(u).size(l)()).scale(c);t.select(".legend").call(d).style("fill",e).style("font-size","90%"),n&&t.selectAll("path.swatch").style("stroke",n)})}var n,e="white",r=["red","green","blue"],o=["Item 1","Item 2","Item 3"],a=0,i=0,u=d3.symbolCircle,l=100;return t.stroke=function(e){return arguments.length?(n=e,t):n},t.x=function(n){return arguments.length?(a=n,t):a},t.y=function(n){return arguments.length?(i=n,t):i},t.text=function(n){return arguments.length?(o=n,t):o},t.colors=function(n){return arguments.length?(r=n,t):r},t.color=function(n){return arguments.length?(e=n,t):e},t.symbol=function(n){return arguments.length?(u=n,t):u},t.symbolSize=function(n){return arguments.length?(l=n,t):l},t}}}(),function(){"use strict";var t={dark:{background:"#1D1F21",black:"#282A2E",blue:"#5F819D",cyan:"#5E8D87",foreground:"#C5C8C6",green:"#8C9440",magenta:"#85678F",red:"#A54242",white:"#707880",yellow:"#DE935F"},gotham:{background:"#0A0F14",black:"#0A0F14",blue:"#195465",cyan:"#33859D",foreground:"#98D1CE",green:"#26A98B",magenta:"#4E5165",red:"#C33027",white:"#98D1CE",yellow:"#EDB54B"},light:{background:"#FFFFFF",black:"#000000",blue:"#87AFDF",cyan:"#AFDFDF",foreground:"#1A1D1D",green:"#AFD787",magenta:"#DFAFDF",red:"#D78787",white:"#FFFFFF",yellow:"#FFFFAF"},monokai:{background:"#272822",black:"#272822",blue:"#66D9EF",cyan:"#A1EFE4",foreground:"#F8F8F2",green:"#A6E22E",magenta:"#AE81FF",red:"#F92672",white:"#F8F8F2",yellow:"#F4BF75"},ocean:{background:"#2B303B",black:"#2B303B",blue:"#8FA1B3",cyan:"#96B5B4",foreground:"#C0C5CE",green:"#A3BE8C",magenta:"#B48EAD",red:"#BF616A",white:"#C0C5CE",yellow:"#EBCB8B"},sweetlove:{background:"#1F1F1F",black:"#4A3637",blue:"#535C5C",cyan:"#6D715E",foreground:"#C0B18B",green:"#7B8748",magenta:"#775759",red:"#D17B49",white:"#C0B18B",yellow:"#AF865A"},tomorrowlight:{background:"#FFFFFF",black:"#1D1F21",blue:"#81A2BE",cyan:"#8ABEB7",foreground:"#373B41",green:"#B5BD68",magenta:"#B294BB",red:"#CC6666",white:"#C5C8C6",yellow:"#F0C674"},yousay:{background:"#F5E7DE",black:"#666661",blue:"#4C7399",cyan:"#D97742",foreground:"#34302D",green:"#4C3226",magenta:"#BF9986",red:"#992E2E",white:"#34302D",yellow:"#A67C53"}},n=function(t,n){return t.name=n,t.fade=function(n){return l(t.name,100)[n]},t},e=function(t){var e=t;return"string"!=typeof t||t.startsWith("rgb")||(t=d3.rgb(d3wb.color[t]),t=n(t,e)),t},r=function(t){for(var n=[],e=0;e<t.length;e++)t[e].startsWith("#")?n.push(""+d3.rgb(t[e])):n.push(""+d3wb.color(t[e]));return n},o=function(){for(var t=["blue","red","green","magenta","foreground"],n=[],e=0;e<t.length;e++){var r=d3wb.color.lohiScaleArray(t[e],5,[.6,.6]);n=n.concat(r)}return n},a=function(){for(var t=["blue","cyan","green","magenta","red","yellow","foreground"],n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n},i=function(t,n,e){if(e=e||[0,1],n<=2)return[t(0),t(1)];var r=(e[1]-e[0])/n,o=e[0]+r,a=[];a.push(t(e[0]));do{a.push(t(o)),o+=r}while(o<e[1]-r-1e-4);return a.push(t(e[1])),a},u=function(t,n,r,o){t=e(t),n=e(n);var a=d3.interpolateRgb(t,n);return i(a,r,o)},l=function(t,n,e){e=e||[.4,.7];var r=n%2==0,o=r?n/2:(n+1)/2,a=u("black",t,r?o+1:o,[e[0],1]),i=u(t,"white",o,[0,e[1]]);return a.concat(i.slice(1))},c=function(){return d3.scaleOrdinal(d3wb.color.category())},d=function(){for(var t=[],n=2;n<25;n+=5)t.push(d3wb.color.category()[n]);return d3.scaleOrdinal(t)},s=function(t,n){return n=n||[d3wb.color.white,d3wb.color.black],d3.scaleLinear().domain(t).interpolate(d3.interpolate).range(n)},f=function(t,n){return d3.scaleQuantile().domain(t).range(n)};d3wb.theme=function(e){if(!arguments.length){var i=Object.keys(d3wb.color),h=[];for(var g in i)"function"!=typeof d3wb.color[i[g]]&&h.push(d3wb.color[i[g]].name);return h}var p=t[e],b={lohiScaleArray:l,array:r,gradientArray:u,category:o,categoryMain:a,quantile:f,linearGradient:s,ordinal:c,smallOrdinal:d};for(var y in p)b[y]=d3.rgb(p[y]),b[y]=n(b[y],y);d3wb.color=b},d3wb.theme("light")}(),function(){"use strict";function t(t){var n={id:d3wb.util.websafeGuid(),div:d3.select("body"),callback:function(){console.log("callback.")},callbackOnInit:!1};return t.id=function(e){return arguments.length?(id=e,t):"#"+n.id},t.style=function(e,r){return d3wb.util.injectCSS(`\n                    #`+n.id+` {\n                        `+e+`: `+r+`;\n                    }\n                `),t},t.callback=function(e){return arguments.length?(n.callback=e,t):n.callback},n}function n(t){return void 0!==t.div?t.div:t}d3wb.html={dropdown:function(){function e(t){(t=n(t)).each(function(){var t=function(){var t=d3.select("#"+o.id).property("value"),n=r.indexOf(t);o.callback(t,n)};d3.select(this).append("select").attr("id",o.id).on("change",t).selectAll("option").data(r).enter().append("option").text(function(t){return t}),d3wb.util.injectCSS(`\n                        #`+o.id+` {\n                            position: absolute;\n                        }\n                    `),t()})}var r=["Option 1","Option 2","Option 3"],o=t(e);return e.options=function(t){return arguments.length?(r=t,e):r},e},button:function(){function e(t){(t=n(t)).each(function(){var t=d3.select(this),n=function(){var t=d3.select("#"+i.id).text(),n=o.indexOf(t);a=(a+1)%o.length,i.callback(t,n),r.text(o[a])};r=t.append("button").attr("id",i.id).text(o[a]).on("click",n),d3wb.util.injectCSS(`\n                        #`+i.id+` {\n                            position: absolute;\n                        }\n                    `),i.callbackOnInit&&n()})}var r,o=["Click me"],a=0,i=t(e);return e.options=function(t){return arguments.length?(o=t,e):o},e},textfield:function(){function e(t){(t=n(t)).each(function(){var t=function(t){r.callback(t.value)};d3.select(this).append("input").attr("id",r.id).on("input",function(){t(this)}),d3wb.util.injectCSS(`\n                        #`+r.id+` {\n                            position: absolute;\n                        }\n                    `)})}var r=t(e);return e}}}(),function(){"use strict";var t=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};d3wb.util={setLocale:function(t){if("de"!=t)throw"Unsupported locale.";d3.timeFormat=d3.timeFormatLocale({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}).format},changeCSVSeparator:function(t){d3.csv=function(n,e){d3.request(n).mimeType("text/csv").response(function(n){return d3.dsvFormat(t).parse(n.responseText)}).get(e)}},smoothData:function(t,n,e,r){var o=[],a=[];t.forEach(function(n,i){var u=i+1;if(o.push(n[e]),u%r==0||u==t.length){var l=d3.median(o);a.push(l),o=[]}});var i=[],u=0,l=0;for(var c in a){a[c];for(var d=(u+=r)>t.length?t.length%r:r,s=0==c?t[0][e]:a[c-1],f=a[c],h=d3.interpolate(s,f),g=1/d,p=0,b=0;b<d;b++){p+=g;var y={};y[n]=t[l][n],y[e]=h(p),i.push(y),l+=1}}return i},countCsvColumn:function(t,n,e,r){e=void 0===e||e;var o=d3.nest().key(function(t){return t[n]}).entries(t);void 0!==r&&r.length>0&&(o=o.filter(function(t){return!r.includes(t.key)}));for(var a=[],i=0;i<o.length;i++){var u={label:o[i].key,count:+o[i].values.length};a.push(u)}var l=d3.sum(a,function(t){return+t.count});return a.forEach(function(t){t.percent=+t.count/l*100}),e&&a.sort(function(t,n){return n.percent-t.percent}),a},guid:t,websafeGuid:function(){return"d3wb-"+t()},injectCSS:function(t){var n=document.getElementsByTagName("head")[0],e=document.createElement("style");e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),n.appendChild(e)},logSVGSize:function(t){var n=t.ownerSVGElement.getBBox();console.log(n.x+" x "+n.y+" | "+n.width+" x "+n.height)},jsonAttributeMapToCSV:function(t){var n=["key"];for(var e in t[Object.keys(t)[0]])n.push(e);var r=['"'+n.join('","')+'"'];for(var o in t){var a=[o];for(var i in n)if(0!=i){var u=n[i];a.push(t[o][u])}r.push('"'+a.join('","')+'"')}var l=r.join("\n");return d3.csvParse(l)},getBoundingBoxCenter:function(t){var n=d3.select(t).node().getBBox();return[n.x+n.width/2,n.y+n.height/2]}}}();
