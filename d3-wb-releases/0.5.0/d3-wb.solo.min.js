var d3wb=function(){"use strict";var t={};t.symbol={mean:"Ø",median:"x̃",sum:"Σ"};t.config=function(){var i={width:h("Width"),height:h("Height"),margin:{top:0,right:0,bottom:0,left:0},parentDivId:null,svgId:null,debug:!1,bgColor:t.color.background,datasrc:void 0};return i.attr=function(t,r){if(void 0!==t&&void 0!==r){if(t=String(t).trim(),"string"==typeof r&&(r=String(r).trim()),t.match(/^margin\..+$/))return this[(i=t.split("."))[0]][i[1]]=+r,this;if("margin"==t&&String(r).match(/^[0-9]+[ ]+[0-9]+[ ]+[0-9]+[ ]+[0-9]+$/)){var i=r.split(/[ ]+/);return this.margin={top:+i[0],right:+i[1],bottom:+i[2],left:+i[3]},this}return this[t]=r,this}},i.data=function(t){return arguments.length?(this.datasrc=t,this):this.datasrc},i.toCanvas=function(){return r(this)},i};var r=function(t){if(i(t),o(t.parentDivId)||t.parentDivId.startsWith("#")||(t.parentDivId="#"+t.parentDivId),o(t.svgId)||t.svgId.startsWith("#")||(t.svgId="#"+t.svgId),d(t),t.innerWidth=t.width-t.margin.left-t.margin.right,t.innerHeight=t.height-t.margin.top-t.margin.bottom,o(t.svgId)||null==d3.select(t.svgId).node())r=d3.select("svg");else var r=d3.select(t.svgId);r.attr("width",t.width).attr("height",t.height),r.append("rect").attr("width",t.width).attr("height",t.height).attr("fill",t.bgColor),d3.select("#standalone-body").style("background-color",t.bgColor),n(r,t),a(r,t);var e=r.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")");return e.svg=r,e.width=t.innerWidth,e.wid=t.innerWidth,e.w=t.innerWidth,e.height=t.innerHeight,e.hei=t.innerHeight,e.h=t.innerHeight,e.margin=t.margin,e.mar=t.margin,e.m=t.margin,e.data=t.data(),e.d=t.data(),e.div=d3.select(t.parentDivId?t.parentDivId:"#standalone-body"),e.transformCircular=function(){this.attr("transform","translate("+(this.w/2+this.m.left)+","+(this.h/2+this.m.top)+")")},e},i=function(t){var r=document.getElementsByTagName("script");if(!o(r)&&0!=r.length){i=r[r.length-1].src.split("/");if(!(o(i)||i.length<2)){var i=i[i.length-2],n=r[r.length-1],a=n.getAttribute("embedded")||!1;if(t.debug&&(console.log("scri-path | "+i),console.log("embedded  | "+a)),a){t.svgId=n.getAttribute("svgid")||!1,t.parentDivId=n.getAttribute("divid")||!1;var d=n.getAttribute("datapath")||void 0;e(t,d),t.debug&&(console.log("svg-id    | "+t.svgId),console.log("parent-id | "+t.parentDivId),console.log("data-path | "+d),console.log("res-path  | "+t.datasrc))}}}},e=function(t,r){if(void 0!==t.datasrc)if("string"==typeof t.datasrc||t.datasrc instanceof String)t.datasrc=r+"/"+t.datasrc;else for(var i=0;i<t.datasrc.length;i++)t.datasrc[i]=r+"/"+t.datasrc[i]},n=function(r,i){i.debug&&(r.append("rect").attr("width",i.width).attr("height",i.height).attr("fill",t.color.background.fade(20)),r.append("text").attr("x",i.width).attr("dominant-baseline","hanging").attr("text-anchor","end").attr("fill",t.color.white).text(i.width+"x"+i.height),r.append("rect").attr("width",i.margin.left).attr("height",i.margin.top).attr("fill",t.color.background.fade(10)),r.append("text").attr("font-size","80%").attr("x",i.margin.left/2).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("fill",t.color.white).text(i.margin.left),r.append("text").attr("font-size","80%").attr("y",i.margin.top/2).attr("dominant-baseline","middle").attr("text-anchor","begin").attr("fill",t.color.white).text(i.margin.top),r.append("rect").attr("x",i.width-i.margin.right).attr("y",i.height-i.margin.bottom).attr("width",i.margin.right).attr("height",i.margin.bottom).attr("fill",t.color.background.fade(10)),r.append("text").attr("font-size","80%").attr("x",i.width-i.margin.right/2).attr("y",i.height).attr("dominant-baseline","baseline").attr("text-anchor","middle").attr("fill",t.color.white).text(i.margin.right),r.append("text").attr("font-size","80%").attr("x",i.width).attr("y",i.height-i.margin.bottom/2).attr("dominant-baseline","middle").attr("text-anchor","end").attr("fill",t.color.white).text(i.margin.bottom))},a=function(r,i){if(i.debug){var e=r.append("g");e.append("rect").attr("width",i.innerWidth).attr("height",i.innerHeight).attr("fill",t.color.white.fade(30)),e.append("text").attr("x",i.innerWidth).attr("dominant-baseline","hanging").attr("text-anchor","end").attr("fill",t.color.white).text(i.innerWidth+"x"+i.innerHeight),e.append("circle").attr("cx",i.innerWidth/2).attr("cy",i.innerHeight/2).attr("r",5).attr("fill",t.color.white),e.append("line").attr("x1",0).attr("x2",i.innerWidth/2).attr("y1",0).attr("y2",i.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),e.append("line").attr("x1",i.innerWidth).attr("x2",i.innerWidth/2).attr("y1",i.innerHeight).attr("y2",i.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),e.append("line").attr("x1",i.innerWidth).attr("x2",i.innerWidth/2).attr("y1",0).attr("y2",i.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),e.append("line").attr("x1",0).attr("x2",i.innerWidth/2).attr("y1",i.innerHeight).attr("y2",i.innerHeight/2).attr("stroke-width",1).attr("stroke",t.color.white),e.attr("transform","translate("+i.margin.left+","+i.margin.top+")")}},d=function(t){if(!o(t.parentDivId)&&null!=d3.select(t.parentDivId).node()){var r=d3.select(t.parentDivId).node().getBoundingClientRect(),i=r.width;i<1&&(i=t.width);t.width;var e=r.height;t.width=i,t.height=e}},o=function(t){return void 0===t||null===t||""===t},h=function(t){return Math.max(document.documentElement["client"+t],document.body["scroll"+t],document.documentElement["scroll"+t],document.body["offset"+t],document.documentElement["offset"+t])};return t}();
